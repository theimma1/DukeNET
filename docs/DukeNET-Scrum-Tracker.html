<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DukeNET Updated Scrum Tracker</title>
    <style>
        :root {
            --color-bg: #fcfcf9;
            --color-surface: #ffffff;
            --color-text: #13343b;
            --color-primary: #218d8d;
            --color-primary-hover: #1d747a;
            --color-secondary: rgba(94, 82, 64, 0.12);
            --color-border: rgba(94, 82, 64, 0.2);
            --color-success: #218d8d;
            --color-warning: #e68161;
            --color-error: #c0152f;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, Segoe UI, sans-serif;
            background: var(--color-bg);
            color: var(--color-text);
            padding: 2rem;
            line-height: 1.6;
        }
        .container { max-width: 1200px; margin: 0 auto; }
        h1 { font-size: 2rem; margin-bottom: 0.5rem; }
        .subtitle { color: rgba(19, 52, 59, 0.7); margin-bottom: 2rem; font-size: 0.95rem; }
        .progress-summary {
            background: var(--color-surface);
            border: 1px solid var(--color-border);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 2rem;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
        }
        .progress-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1.5rem; margin-top: 1rem; }
        .progress-card { text-align: center; }
        .progress-card h3 { font-size: 0.85rem; font-weight: 500; color: rgba(19, 52, 59, 0.7); text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 0.5rem; }
        .progress-number { font-size: 2.5rem; font-weight: 600; color: var(--color-primary); }
        .progress-label { font-size: 0.9rem; color: rgba(19, 52, 59, 0.6); }
        .progress-bar-container { width: 100%; height: 8px; background: var(--color-secondary); border-radius: 4px; overflow: hidden; margin-top: 1rem; }
        .progress-bar { height: 100%; background: var(--color-primary); transition: width 0.3s ease; border-radius: 4px; }
        .epic-section {
            background: var(--color-surface);
            border: 1px solid var(--color-border);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 2rem;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
        }
        .epic-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem; }
        .epic-title { font-size: 1.3rem; font-weight: 600; }
        .epic-progress { font-size: 0.9rem; color: var(--color-primary); font-weight: 500; }
        .task-list { display: flex; flex-direction: column; gap: 0.75rem; }
        .task-item {
            display: flex; align-items: flex-start; gap: 1rem; padding: 1rem;
            background: var(--color-bg); border: 1px solid var(--color-border); border-radius: 8px;
            transition: all 0.2s ease;
        }
        .task-item:hover { border-color: var(--color-primary); box-shadow: 0 2px 8px rgba(33, 141, 141, 0.1); }
        .task-checkbox {
            width: 20px; height: 20px; border: 2px solid var(--color-border); border-radius: 4px;
            cursor: pointer; flex-shrink: 0; margin-top: 2px; transition: all 0.2s ease;
            position: relative;
        }
        .task-checkbox:hover { border-color: var(--color-primary); }
        .task-checkbox.completed {
            background: var(--color-primary); border-color: var(--color-primary);
        }
        .task-checkbox.completed::after {
            content: '✓'; position: absolute; top: 50%; left: 50%;
            transform: translate(-50%, -50%); color: white; font-size: 14px; font-weight: bold;
        }
        .task-content { flex: 1; }
        .task-text {
            font-size: 0.95rem; color: var(--color-text); line-height: 1.5; cursor: text;
        }
        .task-text.completed { text-decoration: line-through; color: rgba(19, 52, 59, 0.5); }
        .task-text.editing {
            background: var(--color-bg); border: 2px solid var(--color-primary); border-radius: 4px; padding: 0.5rem; outline: none;
        }
        .task-actions { display: flex; gap: 0.5rem; opacity: 0; transition: opacity 0.2s ease; }
        .task-item:hover .task-actions { opacity: 1; }
        .task-btn {
            padding: 0.25rem 0.5rem; border: none; border-radius: 4px; font-size: 0.85rem;
            cursor: pointer; background: var(--color-secondary); color: var(--color-text);
            transition: all 0.2s ease;
        }
        .task-btn:hover { background: rgba(94, 82, 64, 0.25); }
        .task-btn.delete { background: rgba(192, 21, 47, 0.15); color: var(--color-error); }
        .task-btn.delete:hover { background: rgba(192, 21, 47, 0.25); }
        .epic-actions { display: flex; gap: 0.5rem; margin-top: 1rem; }
        .add-task-input {
            flex: 1; padding: 0.75rem; border: 2px solid var(--color-border); border-radius: 8px;
            font-size: 0.95rem; font-family: inherit; transition: border-color 0.2s ease;
        }
        .add-task-input:focus { outline: none; border-color: var(--color-primary); }
        .controls { display: flex; gap: 1rem; margin-bottom: 2rem; flex-wrap: wrap; }
        .btn {
            padding: 0.75rem 1.5rem; border: none; border-radius: 8px; font-size: 0.95rem;
            font-weight: 500; cursor: pointer; transition: all 0.2s ease;
        }
        .btn-primary { background: var(--color-primary); color: white; }
        .btn-primary:hover { background: var(--color-primary-hover); }
        .btn-secondary {
            background: var(--color-secondary); color: var(--color-text); border: 1px solid var(--color-border);
        }
        .btn-secondary:hover { background: rgba(94, 82, 64, 0.2); }
        .status-badge {
            display: inline-block; padding: 0.25rem 0.75rem; border-radius: 12px;
            font-size: 0.85rem; font-weight: 500;
        }
        .status-not-started { background: rgba(168, 75, 47, 0.15); color: var(--color-warning); }
        .status-in-progress { background: rgba(33, 141, 141, 0.15); color: var(--color-primary); }
        .status-completed { background: rgba(33, 141, 141, 0.15); color: var(--color-success); }
        @media (max-width: 768px) {
            body { padding: 1rem; }
            h1 { font-size: 1.5rem; }
            .progress-grid { grid-template-columns: 1fr; }
            .controls { flex-direction: column; }
            .btn { width: 100%; }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>DukeNET Updated Scrum Tracker</h1>
        <p class="subtitle">AI Internet infrastructure - AINS ✅ COMPLETE | Next: AICP + Labelee Integration</p>
        
        <div class="progress-summary">
            <h2 style="margin-bottom: 1rem; font-size: 1.1rem;">Overall Progress</h2>
            <div class="progress-grid">
                <div class="progress-card">
                    <h3>Completion</h3>
                    <div class="progress-number" id="overallPercent">35</div>
                    <div class="progress-label">of all tasks</div>
                </div>
                <div class="progress-card">
                    <h3>Tasks Done</h3>
                    <div class="progress-number" id="completedTasks">22</div>
                    <div class="progress-label">out of <span id="totalTasks">63</span></div>
                </div>
                <div class="progress-card">
                    <h3>Status</h3>
                    <div class="progress-number" style="font-size: 1.5rem; margin-top: 0.5rem;">
                        <span class="status-badge" id="overallStatus">In Progress</span>
                    </div>
                </div>
                <div class="progress-card">
                    <div class="progress-bar-container">
                        <div class="progress-bar" id="overallProgressBar" style="width: 35%"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="controls">
            <button class="btn btn-primary" onclick="recalculateProgress()">Recalculate Progress</button>
            <button class="btn btn-secondary" onclick="resetAll()">Reset All Tasks</button>
            <button class="btn btn-secondary" onclick="saveProgress()">Save Progress</button>
        </div>

        <div id="epicsContainer"></div>
    </div>

    <script>
        // Updated data structure reflecting AINS completion and next priorities
        const scrumData = {
            epics: [
                {
                    id: 'ains-complete',
                    name: 'AINS Production ✅ COMPLETE',
                    completed: true,
                    tasks: [
                        '10 sprints complete: Foundation → Production Deployment',
                        'Live at https://dnet-llur.onrender.com',
                        'Agent management, task routing, trust system, security, observability',
                        'All core features production-ready v1.0.0'
                    ]
                },
                {
                    id: 'team-formation',
                    name: 'Team Formation',
                    tasks: [
                        'Identify and assign Product Owner',
                        'Identify and assign Scrum Master', 
                        'Recruit Development Team members (5-7 people)',
                        'Confirm team member availability and commitment',
                        'Schedule team kickoff meeting'
                    ]
                },
                {
                    id: 'vision-goals',
                    name: 'Vision & Goals',
                    tasks: [
                        'Review and validate project vision with stakeholders',
                        'Define success metrics (Time to first agent deployment, SDK downloads)',
                        'Identify key stakeholders and their roles',
                        'Document high-level project constraints (timeline, budget, resources)',
                        'Align team on project priorities'
                    ]
                },
                {
                    id: 'product-backlog',
                    name: 'Product Backlog Creation ⭐ PRIORITY',
                    tasks: [
                        'Review the 6 core components: AICP, AINS✅, AITP, AgentOS, Node Network, Marketplace',
                        'Break down Epic AICP into user stories for first sprint ⭐ NEXT',
                        'Prioritize epics based on business value and technical dependencies',
                        'Estimate complexity of top priority items (Planning Poker)',
                        'Define Definition of Done for user stories'
                    ]
                },
                {
                    id: 'aicp-protocol',
                    name: 'AICP Protocol ⭐ NEXT SPRINT (Weeks 5-8)',
                    tasks: [
                        'Write protocol specification (RFC-style document)',
                        'Implement message structure and serialization ⭐ START HERE',
                        'Build authentication layer (Ed25519 signatures)',
                        'Create basic routing and delivery mechanisms',
                        'Develop protocol test suite',
                        'Write developer documentation for AICP'
                    ]
                },
                {
                    id: 'labelee-integration',
                    name: 'Labelee Duke Model Integration ⭐ HIGH VALUE',
                    tasks: [
                        'Define Labelee Duke Model API endpoints and schemas',
                        'Create AINS agent registration for Labelee Duke',
                        'Implement task routing to Labelee Duke (labeling tasks)',
                        'Set up trust scoring for Labelee model performance ⭐ QUICK WIN',
                        'Test end-to-end: Task → Labelee → Result → Trust update',
                        'Document Labelee integration guide'
                    ]
                },
                {
                    id: 'sprint-setup',
                    name: 'Sprint Setup',
                    tasks: [
                        'Decide on Sprint length (recommend 2 weeks)',
                        'Schedule Sprint Planning meetings (start of sprint)',
                        'Schedule Daily Standups (15 min daily)',
                        'Schedule Sprint Review meetings (end of sprint)',
                        'Schedule Sprint Retrospective meetings (end of sprint)',
                        'Set up project management tools (Jira, Trello, etc.)',
                        'Create team communication channels (Slack, Teams, etc.)'
                    ]
                },
                {
                    id: 'infrastructure',
                    name: 'Infrastructure Tools',
                    tasks: [
                        'Set up version control (Git repository) ⭐ DO TODAY',
                        'Configure CI/CD pipeline',
                        'Establish coding standards and review processes',
                        'Set up monitoring and logging tools',
                        'Create project documentation structure'
                    ]
                },
                {
                    id: 'legal-foundation',
                    name: 'Legal Project Foundation (Week 1-4)',
                    tasks: [
                        'Incorporate company (Delaware C-Corp recommended)',
                        'Set up bank accounts and financial infrastructure',
                        'File provisional patents for core innovations',
                        'Create project roadmap and sprint planning system'
                    ]
                }
            ]
        };

        let taskStates = {};

        // Initialize from localStorage or create new state
        function initializeState() {
            const saved = localStorage.getItem('dukenetScrumProgress');
            if (saved) {
                taskStates = JSON.parse(saved);
            } else {
                // Pre-mark AINS as complete
                scrumData.epics.forEach((epic, epicIndex) => {
                    epic.tasks.forEach((task, taskIndex) => {
                        const taskId = `${epic.id}-${taskIndex}`;
                        if (epic.id === 'ains-complete') {
                            taskStates[taskId] = true;
                        } else {
                            taskStates[taskId] = false;
                        }
                    });
                });
            }
            saveToLocalStorage();
        }

        function saveToLocalStorage() {
            localStorage.setItem('dukenetScrumProgress', JSON.stringify(taskStates));
        }

        function calculateProgress() {
            const totalTasks = Object.keys(taskStates).length;
            const completedTasks = Object.values(taskStates).filter(state => state).length;
            const percentage = totalTasks > 0 ? Math.round((completedTasks / totalTasks) * 100) : 0;
            return { totalTasks, completedTasks, percentage };
        }

        function updateProgressUI() {
            const { totalTasks, completedTasks, percentage } = calculateProgress();
            document.getElementById('overallPercent').textContent = percentage;
            document.getElementById('completedTasks').textContent = completedTasks;
            document.getElementById('totalTasks').textContent = totalTasks;
            document.getElementById('overallProgressBar').style.width = percentage + '%';

            const statusBadge = document.getElementById('overallStatus');
            if (percentage === 0) {
                statusBadge.textContent = 'Not Started';
                statusBadge.className = 'status-badge status-not-started';
            } else if (percentage === 100) {
                statusBadge.textContent = 'Completed';
                statusBadge.className = 'status-badge status-completed';
            } else {
                statusBadge.textContent = 'In Progress';
                statusBadge.className = 'status-badge status-in-progress';
            }

            scrumData.epics.forEach(epic => updateEpicProgress(epic.id));
        }

        function updateEpicProgress(epicId) {
            const epic = scrumData.epics.find(e => e.id === epicId);
            if (!epic) return;
            const epicTasks = epic.tasks.length;
            const completedEpicTasks = epic.tasks.filter((_, index) => taskStates[`${epicId}-${index}`]).length;
            const epicPercentage = epicTasks > 0 ? Math.round((completedEpicTasks / epicTasks) * 100) : 0;
            const progressElement = document.getElementById(`epic-progress-${epicId}`);
            if (progressElement) progressElement.textContent = `${completedEpicTasks}/${epicTasks} (${epicPercentage}%)`;
        }

        function toggleTask(epicId, taskIndex) {
            const taskId = `${epicId}-${taskIndex}`;
            taskStates[taskId] = !taskStates[taskId];
            const checkbox = document.getElementById(`checkbox-${taskId}`);
            const taskText = document.getElementById(`text-${taskId}`);
            if (taskStates[taskId]) {
                checkbox.classList.add('completed');
                taskText.classList.add('completed');
            } else {
                checkbox.classList.remove('completed');
                taskText.classList.remove('completed');
            }
            saveToLocalStorage();
            updateProgressUI();
        }

        function renderEpics() {
            const container = document.getElementById('epicsContainer');
            container.innerHTML = '';
            scrumData.epics.forEach(epic => {
                const epicSection = document.createElement('div');
                epicSection.className = 'epic-section';
                epicSection.innerHTML = `
                    <div class="epic-header">
                        <h2 class="epic-title">${epic.name}</h2>
                        <span class="epic-progress" id="epic-progress-${epic.id}">0/${epic.tasks.length} (0%)</span>
                    </div>
                    <div class="task-list">
                        ${epic.tasks.map((task, index) => {
                            const taskId = `${epic.id}-${index}`;
                            const isCompleted = taskStates[taskId];
                            return `
                                <div class="task-item">
                                    <div class="task-checkbox ${isCompleted ? 'completed' : ''}" 
                                         id="checkbox-${taskId}" 
                                         onclick="toggleTask('${epic.id}', ${index})"></div>
                                    <div class="task-content">
                                        <div class="task-text ${isCompleted ? 'completed' : ''}" 
                                             id="text-${taskId}"
                                             contenteditable="true"
                                             onblur="updateTaskText('${epic.id}', ${index}, this.textContent)"
                                             onkeydown="if(event.key === 'Enter') { event.preventDefault(); this.blur(); }">${task}</div>
                                    </div>
                                    <div class="task-actions">
                                        <button class="task-btn delete" onclick="deleteTask('${epic.id}', ${index})">Delete</button>
                                    </div>
                                </div>
                            `;
                        }).join('')}
                    </div>
                    <div class="epic-actions">
                        <input type="text" class="add-task-input" id="new-task-${epic.id}" 
                               placeholder="Add a new task and press Enter..." />
                    </div>
                `;
                container.appendChild(epicSection);

                // Add event listener for new tasks
                const addTaskInput = document.getElementById(`new-task-${epic.id}`);
                if (addTaskInput) {
                    addTaskInput.addEventListener('keypress', (e) => {
                        if (e.key === 'Enter' && e.target.value.trim()) {
                            addTask(epic.id, e.target.value.trim());
                            e.target.value = '';
                        }
                    });
                }
            });
            updateProgressUI();
        }

        function updateTaskText(epicId, taskIndex, newText) {
            const epic = scrumData.epics.find(e => e.id === epicId);
            if (!epic || !newText.trim()) {
                renderEpics();
                return;
            }
            if (newText.trim()) {
                epic.tasks[taskIndex] = newText.trim();
            }
            saveScrumData();
        }

        function addTask(epicId, taskText) {
            const epic = scrumData.epics.find(e => e.id === epicId);
            if (!epic) return;
            epic.tasks.push(taskText);
            const newTaskIndex = epic.tasks.length - 1;
            const taskId = `${epicId}-${newTaskIndex}`;
            taskStates[taskId] = false;
            saveToLocalStorage();
            saveScrumData();
            renderEpics();
        }

        function deleteTask(epicId, taskIndex) {
            if (!confirm('Are you sure you want to delete this task?')) return;
            const epic = scrumData.epics.find(e => e.id === epicId);
            if (!epic) return;
            epic.tasks.splice(taskIndex, 1);
            // Clean up task states
            Object.keys(taskStates).forEach(key => {
                if (key.startsWith(epicId + '-')) {
                    const taskIdx = parseInt(key.split('-').pop());
                    if (taskIdx >= epic.tasks.length) {
                        delete taskStates[key];
                    }
                }
            });
            saveToLocalStorage();
            saveScrumData();
            renderEpics();
        }

        function saveScrumData() {
            localStorage.setItem('dukenetScrumData', JSON.stringify(scrumData));
        }

        function loadScrumData() {
            const saved = localStorage.getItem('dukenetScrumData');
            if (saved) {
                const savedData = JSON.parse(saved);
                scrumData.epics = savedData.epics;
            }
        }

        function recalculateProgress() {
            updateProgressUI();
            alert('Progress recalculated successfully!');
        }

        function resetAll() {
            if (confirm('Are you sure you want to reset all tasks? This cannot be undone.')) {
                Object.keys(taskStates).forEach(key => taskStates[key] = false);
                saveToLocalStorage();
                renderEpics();
                alert('All tasks have been reset!');
            }
        }

        function saveProgress() {
            saveToLocalStorage();
            alert('Progress saved successfully!');
        }

        // Initialize app
        loadScrumData();
        initializeState();
        renderEpics();
    </script>
</body>
</html>
